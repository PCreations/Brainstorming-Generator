<!DOCTYPE html>
<html>
<head>
  <!-- jQuery -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
  <script src="../plugins/simple-inheritance/simple-inheritance.js" type="text/javascript"></script>
  <script src="brainstorming-generator/Service.class.js" type="text/javascript"></script>
  <script src="brainstorming-generator/AutoCompleteService.class.js" type="text/javascript"></script>
  <script src="brainstorming-generator/BrowseService.class.js" type="text/javascript"></script>
  <script src="brainstorming-generator/DictionaryService.class.js" type="text/javascript"></script>
  <script src="brainstorming-generator/Word.class.js" type="text/javascript"></script>
  <script src="brainstorming-generator/WordManager.class.js" type="text/javascript"></script>
  <script src="brainstorming-generator/BSgenerator.class.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function($) {
	var treeLevel = new Array();
	var recursiveStack = new Array(); //bidouille
	
	var level2 = function(BSref) {
		console.log("selectedWords dans level2 pour "+recursiveStack[0][1]+" = ");
		var selectedWords = BSref.dictionaryService.wm.selectedWords;
		console.log(selectedWords);
		for (var i=0; i<selectedWords.length; i++) {
			//treeLevel[i] = new Array();
			console.log("selectedWords["+i+"] dans level2 = "+selectedWords[i]);
			//treeLevel[recursiveStack[0][0]][1].push(selectedWords[i], new Array());// cas pour prevision 3 niveaux de recursivite
			treeLevel[recursiveStack[0][0]][1].push(selectedWords[i]);// cas pour prevision 2 niveaux de recursivite
			
		}
		recursiveStack.shift();
		if (recursiveStack.length > 0) {
			BSref.reload(recursiveStack[0][1], 4, level2);
			BSref.generate();
		}
		else {
			console.log("TREE LEVEL");
			console.log(treeLevel);
			//BSref.draw(treeLevel);
		}
	};
	
	var level1 = function(BSref) {
		console.log("CALLBACK PROCESS");
		console.log("selectedWords = ");
		var selectedWords = BSref.dictionaryService.wm.selectedWords;
		console.log(selectedWords);
		for (var i=0; i<selectedWords.length; i++) {
			treeLevel[i] = new Array();
			treeLevel[i].push(selectedWords[i], new Array());
			recursiveStack[i] = new Array();
			recursiveStack[i].push(i, treeLevel[i][0]);
		}
		console.log("recursiveStack");
		console.log(recursiveStack);
		BSref.reload(treeLevel[0][0], 5, level2);
		BSref.generate();
	};
	
	var brainstorming = new BSgenerator("love", 10, level1);
	brainstorming.generate();
	
	
});

</script>
</head>
<body>
 <h1>TEST</h1>
</body>
</html>
